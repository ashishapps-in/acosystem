<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Acosystem ¬∑ App Launcher</title>
  <style>
    :root {
      --bg: #080b12;
      --card: #111827;
      --accent: #3b82f6;
      --accent-soft: rgba(59,130,246,0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    @keyframes gradientShift {
      0%,100% { background-position: 0% 50%; }
      50%      { background-position: 100% 50%; }
    }
    @keyframes glow {
      0%,100% { box-shadow: 0 0 18px rgba(59,130,246,.65); }
      50%      { box-shadow: 0 0 28px rgba(59,130,246,.9), 0 0 40px rgba(168,85,247,.4); }
    }
    @keyframes fadeUp {
      from { opacity:0; transform:translateY(18px); }
      to   { opacity:1; transform:translateY(0); }
    }
    @keyframes shimmer {
      from { background-position:-800px 0; }
      to   { background-position: 800px 0; }
    }
    @keyframes chipIn {
      from { opacity:0; transform:scale(.85); }
      to   { opacity:1; transform:scale(1); }
    }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      background: radial-gradient(ellipse at top, #1a2332, #020617 55%);
      background-size: 200% 200%;
      animation: gradientShift 15s ease infinite;
      color: var(--text);
      min-height: 100vh;
      padding: 32px 20px 60px;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed; inset: 0;
      background:
        radial-gradient(circle at 20% 30%, rgba(59,130,246,.07) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(168,85,247,.07) 0%, transparent 50%);
      pointer-events: none; z-index: 0;
    }

    .shell {
      width: 100%; max-width: 1080px; margin: 0 auto;
      background: rgba(15,23,42,.96);
      backdrop-filter: blur(24px);
      border-radius: 26px;
      border: 1px solid rgba(148,163,184,.25);
      box-shadow: 0 24px 64px rgba(0,0,0,.85), 0 0 0 1px rgba(255,255,255,.04) inset;
      padding: 28px 26px 30px;
      position: relative; z-index: 1;
    }

    .shell::before {
      content: ''; position: absolute; top:0; left:0; right:0; height:180px;
      background: linear-gradient(180deg, rgba(59,130,246,.05) 0%, transparent 100%);
      border-radius: 26px 26px 0 0; pointer-events: none;
    }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    .header {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: 28px; gap: 16px;
    }
    .brand { display:flex; align-items:center; gap:14px; }
    .brand-logo {
      width:44px; height:44px; border-radius:14px;
      background: conic-gradient(from 160deg, #3b82f6, #a855f7, #f97316, #3b82f6);
      display:flex; align-items:center; justify-content:center;
      animation: glow 3s ease-in-out infinite;
      position:relative; flex-shrink:0;
    }
    .brand-logo::after {
      content:''; position:absolute; inset:-2px; border-radius:16px;
      background: conic-gradient(from 160deg, #3b82f6, #a855f7, #f97316, #3b82f6);
      opacity:.3; filter:blur(10px); z-index:-1;
    }
    .brand-logo span { font-size:21px; font-weight:800; color:#0b1020; }
    .brand-text h1 {
      font-size:22px; font-weight:800; letter-spacing:.07em; text-transform:uppercase;
      background: linear-gradient(135deg,#fff 0%,#93c5fd 100%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
    }
    .brand-text p { font-size:11.5px; color:var(--muted); margin-top:2px; }
    .pill {
      font-size:11px; padding:6px 14px; border-radius:999px;
      border:1px solid rgba(148,163,184,.2);
      background:rgba(30,41,59,.8);
      color:var(--muted); font-weight:600; letter-spacing:.03em; white-space:nowrap;
    }

    /* ‚îÄ‚îÄ Search ‚îÄ‚îÄ */
    .search-wrap { margin-bottom:8px; position:relative; }

    .search-box {
      position: relative;
    }

    #search {
      width:100%; padding:12px 44px 12px 44px;
      background: rgba(17,24,39,.9);
      border:1px solid var(--border); border-radius:14px;
      color:var(--text); font-size:.9rem; outline:none;
      transition: border-color .2s, box-shadow .2s;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E");
      background-repeat:no-repeat; background-position:14px center;
    }
    #search:focus { border-color:var(--accent); box-shadow:0 0 0 3px rgba(59,130,246,.15); }
    #search::placeholder { color:var(--muted); }

    /* keyboard shortcut hint inside search */
    .search-hint {
      position:absolute; right:14px; top:50%; transform:translateY(-50%);
      font-size:10px; color:var(--muted);
      background:rgba(30,41,59,.9); border:1px solid rgba(148,163,184,.2);
      padding:2px 7px; border-radius:6px; pointer-events:none;
      transition: opacity .2s;
      font-family: monospace;
    }
    #search:focus + .search-hint { opacity:0; }

    /* clear button */
    #clear-btn {
      position:absolute; right:14px; top:50%; transform:translateY(-50%);
      background:none; border:none; color:var(--muted); cursor:pointer;
      font-size:16px; display:none; padding:0 2px;
      transition: color .2s;
    }
    #clear-btn:hover { color:var(--text); }
    #clear-btn.visible { display:block; }
    #clear-btn.visible ~ .search-hint { display:none; }

    /* ‚îÄ‚îÄ Recent searches ‚îÄ‚îÄ */
    #recents-wrap {
      margin-bottom:16px; min-height:0;
      display:none;
    }
    #recents-wrap.visible { display:block; }
    .recents-label {
      font-size:10px; color:var(--muted); letter-spacing:.06em;
      text-transform:uppercase; font-weight:600; margin-bottom:7px;
    }
    .recents-chips { display:flex; flex-wrap:wrap; gap:7px; }
    .chip {
      font-size:11.5px; padding:4px 12px; border-radius:999px;
      border:1px solid rgba(59,130,246,.35);
      background:rgba(37,99,235,.1);
      color:#93c5fd; cursor:pointer;
      transition: background .2s, border-color .2s;
      animation: chipIn .2s ease both;
    }
    .chip:hover { background:rgba(37,99,235,.25); border-color:rgba(59,130,246,.7); }

    /* ‚îÄ‚îÄ Stats bar ‚îÄ‚îÄ */
    #stats {
      font-size:11px; color:var(--muted);
      margin-bottom:14px; min-height:16px;
      display:flex; align-items:center; justify-content:space-between;
    }
    #stats-text { transition: opacity .2s; }
    #stats-count { color:#60a5fa; font-weight:600; }

    /* ‚îÄ‚îÄ Grid ‚îÄ‚îÄ */
    .grid {
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:16px;
    }
    @media(max-width:840px) { .grid { grid-template-columns: repeat(2,1fr); } }
    @media(max-width:520px) {
      .grid { grid-template-columns: 1fr; }
      .shell { padding:20px 16px 22px; }
    }

    /* Skeleton */
    .skeleton {
      background: linear-gradient(90deg, rgba(30,41,59,.6) 25%, rgba(51,65,85,.4) 50%, rgba(30,41,59,.6) 75%);
      background-size:800px 100%;
      animation: shimmer 1.4s infinite;
      border-radius:18px; height:140px;
      border:1px solid var(--border);
    }

    /* ‚îÄ‚îÄ Card ‚îÄ‚îÄ */
    .app-card {
      background: linear-gradient(135deg, rgba(17,24,39,.96) 0%, rgba(30,41,59,.8) 100%);
      border-radius:18px; border:1px solid var(--border);
      padding:18px 16px 14px;
      display:flex; flex-direction:column; gap:12px;
      transition: transform .3s cubic-bezier(.4,0,.2,1), border-color .3s, box-shadow .3s;
      position:relative; overflow:hidden;
      animation: fadeUp .4s ease both;
    }
    .app-card::before {
      content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.04),transparent);
      transition: left .5s;
    }
    .app-card:hover::before { left:100%; }
    .app-card:hover {
      transform: translateY(-5px) scale(1.02);
      border-color: rgba(59,130,246,.7);
      box-shadow: 0 16px 36px rgba(0,0,0,.9), 0 0 0 1px rgba(59,130,246,.4), 0 0 20px rgba(59,130,246,.18);
    }

    .app-main { display:flex; align-items:flex-start; gap:12px; position:relative; z-index:1; }

    .app-icon {
      width:44px; height:44px; border-radius:13px;
      background: var(--accent-soft);
      display:flex; align-items:center; justify-content:center; flex-shrink:0;
      font-size:22px; line-height:1;
      transition: transform .3s ease;
      box-shadow:0 4px 12px rgba(0,0,0,.3);
    }
    .app-card:hover .app-icon { transform: rotate(-6deg) scale(1.1); }

    .app-text h2 { font-size:14.5px; font-weight:700; margin-bottom:4px; }
    .app-text p  { font-size:11.5px; color:var(--muted); line-height:1.55; }

    /* highlight matched text */
    .hl { color:#fff; background:rgba(59,130,246,.3); border-radius:3px; padding:0 2px; font-weight:700; }

    .badge-row { margin-top:7px; }
    .badge {
      font-size:9.5px; padding:3px 9px; border-radius:999px;
      border:1px solid rgba(59,130,246,.8);
      color:#bfdbfe; background:rgba(37,99,235,.2);
      font-weight:700; letter-spacing:.04em; text-transform:uppercase;
      box-shadow:0 0 8px rgba(59,130,246,.2);
    }

    .app-footer a {
      width:100%; display:inline-flex; align-items:center; justify-content:center;
      padding:9px 0; border-radius:999px; font-size:12px; font-weight:600;
      border:1px solid rgba(55,65,81,.9);
      background:rgba(15,23,42,.95); color:var(--text);
      text-decoration:none; gap:6px;
      transition: all .3s ease; position:relative; overflow:hidden;
    }
    .app-footer a::before {
      content:''; position:absolute; inset:0;
      background:linear-gradient(135deg,rgba(59,130,246,.18),rgba(168,85,247,.18));
      opacity:0; transition:opacity .3s;
    }
    .app-footer a:hover::before { opacity:1; }
    .app-footer a:hover {
      border-color:rgba(59,130,246,.7);
      transform:translateY(-2px);
      box-shadow:0 4px 14px rgba(59,130,246,.28);
    }

    /* ‚îÄ‚îÄ States ‚îÄ‚îÄ */
    .state {
      grid-column:1/-1; text-align:center;
      padding:70px 20px; color:var(--muted); font-size:.95rem;
    }
    .state-icon { font-size:2.8rem; display:block; margin-bottom:14px; }
    .state-suggestion {
      margin-top:12px; font-size:.82rem; color:rgba(148,163,184,.6);
    }
    .state-suggestion span {
      color:#60a5fa; cursor:pointer; text-decoration:underline;
    }

    /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
    .footer-credit {
      margin-top:26px; padding-top:20px;
      border-top:1px solid rgba(148,163,184,.15);
      display:flex; align-items:center; justify-content:space-between;
      flex-wrap:wrap; gap:10px;
    }
    .footer-credit p { font-size:11.5px; color:var(--muted); }
    .footer-credit a {
      font-size:11.5px; color:#60a5fa; text-decoration:none; font-weight:600;
      display:inline-flex; align-items:center; gap:5px;
      transition: color .2s, transform .2s;
    }
    .footer-credit a:hover { color:#93c5fd; transform:translateY(-1px); }

    .shalom {
      font-size:11px; color:rgba(148,163,184,.35); text-align:center;
      margin-top:14px; letter-spacing:.14em; text-transform:uppercase;
    }

    ::-webkit-scrollbar { width:8px; }
    ::-webkit-scrollbar-track { background:rgba(15,23,42,.5); }
    ::-webkit-scrollbar-thumb { background:rgba(59,130,246,.4); border-radius:4px; }
    ::-webkit-scrollbar-thumb:hover { background:rgba(59,130,246,.65); }
  </style>
</head>
<body>
<div class="shell">

  <header class="header">
    <div class="brand">
      <div class="brand-logo"><span>A</span></div>
      <div class="brand-text">
        <h1>Acosystem</h1>
        <p>Simple launcher for Ashish's mini-apps</p>
      </div>
    </div>
    <div class="pill" id="count-pill">Loading‚Ä¶</div>
  </header>

  <div class="search-wrap">
    <div class="search-box">
      <input type="text" id="search" placeholder="Search tools‚Ä¶ (press / to focus)">
      <button id="clear-btn" title="Clear search">&#10005;</button>
      <span class="search-hint">/</span>
    </div>
  </div>

  <!-- Recent searches -->
  <div id="recents-wrap">
    <div class="recents-label">Recent searches</div>
    <div class="recents-chips" id="recents-chips"></div>
  </div>

  <!-- Stats -->
  <div id="stats">
    <span id="stats-text"></span>
  </div>

  <div class="grid" id="grid">
    <div class="skeleton"></div>
    <div class="skeleton"></div>
    <div class="skeleton"></div>
  </div>

  <div class="footer-credit">
    <p>All simple web apps made by</p>
    <a href="https://ashish-apps.blogspot.com/" target="_blank" rel="noopener">
      Ashish Apps
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
        <polyline points="15 3 21 3 21 9"/>
        <line x1="10" y1="14" x2="21" y2="3"/>
      </svg>
    </a>
    <a href="https://github.com/ashishapps-in/acosystem" target="_blank" rel="noopener">
      GitHub Repo
      <svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844a9.59 9.59 0 0 1 2.504.337c1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.02 10.02 0 0 0 22 12.017C22 6.484 17.522 2 12 2z"/>
      </svg>
    </a>
  </div>
  <p class="shalom">Shalom</p>

</div>

<script>
  var USERNAME = 'ashishapps-in';
  var REPO     = 'acosystem';
  var BASE_URL = 'https://' + USERNAME + '.github.io/' + REPO + '/';
  var API_URL  = 'https://api.github.com/repos/' + USERNAME + '/' + REPO + '/contents/';

  var ICONS = [
    'üîó','üßÆ','üìù','üé®','üîß','üìä','üîç','‚öôÔ∏è','üóÇÔ∏è','üñºÔ∏è',
    'üìê','üéØ','üîê','üìã','üåê','‚è±Ô∏è','üìå','üß©','ü™Ñ','üí°',
    'üîî','üéµ','üì¶','üß≤','üñ±Ô∏è','üß™','üõ°Ô∏è','üó∫Ô∏è','üé≤','üì°'
  ];

  var allCards   = [];
  var recentList = [];   // in-memory recent searches (max 5)
  var debounceTimer = null;

  /* ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ */
  function escHtml(str) {
    return String(str)
      .replace(/&/g,'&amp;')
      .replace(/</g,'&lt;')
      .replace(/>/g,'&gt;')
      .replace(/"/g,'&quot;');
  }

  /* Highlight occurrences of `q` inside `text` (case-insensitive) */
  function highlight(text, q) {
    if (!q) return escHtml(text);
    var safe = escHtml(text);
    var safeQ = escHtml(q).replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    try {
      var re = new RegExp('(' + safeQ + ')', 'gi');
      return safe.replace(re, '<span class="hl">$1</span>');
    } catch(e) {
      return safe;
    }
  }

  /* Simple fuzzy score: returns a score >= 0 (higher = better match), -1 = no match */
  function fuzzyScore(text, query) {
    text  = text.toLowerCase();
    query = query.toLowerCase();

    /* exact substring ‚Äî best score */
    if (text.indexOf(query) !== -1) return 100;

    /* all characters of query appear in order in text */
    var ti = 0, qi = 0, score = 0;
    while (ti < text.length && qi < query.length) {
      if (text[ti] === query[qi]) { score++; qi++; }
      ti++;
    }
    if (qi === query.length) return score;

    /* allow 1 typo: try removing each char from query and check substring */
    if (query.length > 2) {
      for (var i = 0; i < query.length; i++) {
        var variant = query.slice(0, i) + query.slice(i + 1);
        if (text.indexOf(variant) !== -1) return 50;
      }
    }

    return -1; /* no match */
  }

  /* ‚îÄ‚îÄ Recent searches ‚îÄ‚îÄ */
  function addRecent(q) {
    if (!q || q.length < 2) return;
    /* remove duplicate */
    for (var i = recentList.length - 1; i >= 0; i--) {
      if (recentList[i].toLowerCase() === q.toLowerCase()) recentList.splice(i, 1);
    }
    recentList.unshift(q);
    if (recentList.length > 5) recentList.length = 5;
  }

  function renderRecents() {
    var wrap   = document.getElementById('recents-wrap');
    var chips  = document.getElementById('recents-chips');
    var search = document.getElementById('search');

    if (!recentList.length || search.value.trim() !== '') {
      wrap.classList.remove('visible');
      return;
    }

    chips.innerHTML = '';
    for (var i = 0; i < recentList.length; i++) {
      (function(term) {
        var chip = document.createElement('span');
        chip.className = 'chip';
        chip.textContent = term;
        chip.addEventListener('click', function() {
          search.value = term;
          wrap.classList.remove('visible');
          doSearch(term);
        });
        chips.appendChild(chip);
      })(recentList[i]);
    }
    wrap.classList.add('visible');
  }

  /* ‚îÄ‚îÄ Stats bar ‚îÄ‚îÄ */
  function updateStats(shown, total, q) {
    var el = document.getElementById('stats-text');
    if (!q) {
      el.innerHTML = '<span id="stats-count">' + total + '</span> tool' + (total !== 1 ? 's' : '') + ' loaded';
    } else {
      el.innerHTML = 'Showing <span id="stats-count">' + shown + '</span> of ' + total + ' tools';
    }
  }

  /* ‚îÄ‚îÄ Fetch meta ‚îÄ‚îÄ */
  function fetchMeta(url, cb) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.onload = function() {
      if (xhr.status >= 200 && xhr.status < 300) {
        var parser = new DOMParser();
        var doc    = parser.parseFromString(xhr.responseText, 'text/html');
        var titleEl = doc.querySelector('title');
        var descEl  = doc.querySelector('meta[name="description"]');
        var title = titleEl ? titleEl.textContent.trim() : '';
        var desc  = descEl  ? (descEl.getAttribute('content') || '').trim() : '';
        if (!desc) desc = 'No description provided.';
        cb(title, desc);
      } else { cb('', 'Could not load description.'); }
    };
    xhr.onerror = function() { cb('', 'Could not load description.'); };
    xhr.send();
  }

  /* ‚îÄ‚îÄ Build card HTML ‚îÄ‚îÄ */
  function makeCard(card, index, q) {
    var article = document.createElement('article');
    article.className = 'app-card';
    article.style.animationDelay = (index * 55) + 'ms';
    var nameHtml = q ? highlight(card.name, q) : escHtml(card.name);
    var descHtml = q ? highlight(card.desc, q) : escHtml(card.desc);
    article.innerHTML =
      '<div class="app-main">' +
        '<div class="app-icon">' + card.icon + '</div>' +
        '<div class="app-text">' +
          '<h2>' + nameHtml + '</h2>' +
          '<p>' + descHtml + '</p>' +
          '<div class="badge-row"><span class="badge">Live</span></div>' +
        '</div>' +
      '</div>' +
      '<div class="app-footer">' +
        '<a href="' + escHtml(card.url) + '" target="_blank" rel="noopener">Open app &#8599;</a>' +
      '</div>';
    return article;
  }

  /* ‚îÄ‚îÄ Find closest match for empty-state suggestion ‚îÄ‚îÄ */
  function findClosest(q) {
    var best = null, bestScore = -1;
    for (var i = 0; i < allCards.length; i++) {
      var s = Math.max(
        fuzzyScore(allCards[i].name, q),
        fuzzyScore(allCards[i].desc, q)
      );
      if (s > bestScore) { bestScore = s; best = allCards[i]; }
    }
    return bestScore > 0 ? best : null;
  }

  /* ‚îÄ‚îÄ Render results ‚îÄ‚îÄ */
  function render(cards, q) {
    var grid = document.getElementById('grid');
    grid.innerHTML = '';

    if (!cards.length) {
      var closest = q ? findClosest(q) : null;
      var suggestion = '';
      if (closest) {
        suggestion = '<div class="state-suggestion">Did you mean: ' +
          '<span id="suggest-link">' + escHtml(closest.name) + '</span>?</div>';
      }
      grid.innerHTML =
        '<div class="state">' +
          '<span class="state-icon">&#128270;</span>' +
          'No tools match &ldquo;' + escHtml(q || '') + '&rdquo;.' +
          suggestion +
        '</div>';

      if (closest) {
        var link = document.getElementById('suggest-link');
        if (link) {
          link.addEventListener('click', function() {
            document.getElementById('search').value = closest.name;
            doSearch(closest.name);
          });
        }
      }
      return;
    }

    for (var i = 0; i < cards.length; i++) {
      grid.appendChild(makeCard(cards[i], i, q));
    }
  }

  /* ‚îÄ‚îÄ Core search logic ‚îÄ‚îÄ */
  function doSearch(q) {
    q = (q || '').trim();

    /* show/hide clear btn */
    var clearBtn = document.getElementById('clear-btn');
    if (q) { clearBtn.classList.add('visible'); }
    else   { clearBtn.classList.remove('visible'); }

    if (!q) {
      render(allCards, '');
      updateStats(allCards.length, allCards.length, '');
      renderRecents();
      return;
    }

    /* fuzzy filter + sort by score */
    var results = [];
    for (var i = 0; i < allCards.length; i++) {
      var score = Math.max(
        fuzzyScore(allCards[i].name, q),
        fuzzyScore(allCards[i].desc, q)
      );
      if (score >= 0) results.push({ card: allCards[i], score: score });
    }
    results.sort(function(a, b) { return b.score - a.score; });

    var filtered = [];
    for (var j = 0; j < results.length; j++) filtered.push(results[j].card);

    render(filtered, q);
    updateStats(filtered.length, allCards.length, q);
  }

  /* ‚îÄ‚îÄ Load tools from GitHub API ‚îÄ‚îÄ */
  function loadTools() {
    var pill = document.getElementById('count-pill');

    var xhr = new XMLHttpRequest();
    xhr.open('GET', API_URL, true);

    xhr.onload = function() {
      if (xhr.status < 200 || xhr.status >= 300) {
        document.getElementById('grid').innerHTML =
          '<div class="state"><span class="state-icon">&#10060;</span>Failed to reach GitHub API.</div>';
        pill.textContent = 'Error'; return;
      }

      var files;
      try { files = JSON.parse(xhr.responseText); } catch(e) {
        document.getElementById('grid').innerHTML =
          '<div class="state"><span class="state-icon">&#10060;</span>Unexpected API response.</div>';
        return;
      }

      if (!Array.isArray(files)) {
        document.getElementById('grid').innerHTML =
          '<div class="state"><span class="state-icon">&#10060;</span>Could not read repo contents.</div>';
        return;
      }

      var htmlFiles = [];
      for (var i = 0; i < files.length; i++) {
        var f = files[i];
        if (f.type === 'file' && f.name.length > 5 &&
            f.name.slice(-5).toLowerCase() === '.html' && f.name !== 'index.html') {
          htmlFiles.push(f);
        }
      }

      if (htmlFiles.length === 0) {
        document.getElementById('grid').innerHTML =
          '<div class="state"><span class="state-icon">&#128237;</span>No tools yet!</div>';
        pill.textContent = '0 Apps'; return;
      }

      document.getElementById('grid').innerHTML = '';
      var loaded = 0, total = htmlFiles.length;

      for (var j = 0; j < total; j++) {
        (function(file, idx) {
          var url  = BASE_URL + file.name;
          var icon = ICONS[idx % ICONS.length];
          fetchMeta(url, function(title, desc) {
            var name = title || file.name.slice(0, -5).replace(/[-_]/g, ' ');
            allCards.push({ name:name, desc:desc, url:url, icon:icon });
            loaded++;
            if (loaded === total) {
              render(allCards, '');
              updateStats(total, total, '');
              pill.textContent = total + ' Apps';
            }
          });
        })(htmlFiles[j], j);
      }
    };

    xhr.onerror = function() {
      document.getElementById('grid').innerHTML =
        '<div class="state"><span class="state-icon">&#10060;</span>Network error.</div>';
      pill.textContent = 'Offline';
    };

    xhr.send();
  }

  /* ‚îÄ‚îÄ Event listeners ‚îÄ‚îÄ */

  /* 1. Search input with 150ms debounce */
  document.getElementById('search').addEventListener('input', function() {
    var q = this.value;
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout(function() { doSearch(q); }, 150);
  });

  /* 2. Show recents when focused and empty */
  document.getElementById('search').addEventListener('focus', function() {
    if (!this.value.trim()) renderRecents();
  });

  /* 3. Save to recents on blur if query is meaningful */
  document.getElementById('search').addEventListener('blur', function() {
    var q = this.value.trim();
    if (q.length >= 2) addRecent(q);
    /* hide recents after short delay to allow chip clicks */
    setTimeout(function() {
      document.getElementById('recents-wrap').classList.remove('visible');
    }, 200);
  });

  /* 4. Clear button */
  document.getElementById('clear-btn').addEventListener('click', function() {
    var inp = document.getElementById('search');
    inp.value = '';
    this.classList.remove('visible');
    doSearch('');
    inp.focus();
  });

  /* 5. Press "/" anywhere to focus search */
  document.addEventListener('keydown', function(e) {
    var tag = document.activeElement ? document.activeElement.tagName : '';
    if (e.key === '/' && tag !== 'INPUT' && tag !== 'TEXTAREA') {
      e.preventDefault();
      document.getElementById('search').focus();
    }
    /* Escape clears search */
    if (e.key === 'Escape') {
      var inp = document.getElementById('search');
      if (inp.value) {
        inp.value = '';
        document.getElementById('clear-btn').classList.remove('visible');
        doSearch('');
      }
    }
  });

  loadTools();
</script>
</body>
</html>
